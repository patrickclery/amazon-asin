[![RSpec tests](https://github.com/patrickclery/amazon-asin/workflows/Rails%20+%20React%20+%20PostgreSQL/badge.svg)](https://github.com/patrickclery/amazon-asin/actions?query=workflow%3A%22Rails+%2B+React+%2B+PostgreSQL%22)
[![Docker Image](https://badgen.net/docker/size/patrickclery/amazon-asin/latest/amd64)](https://hub.docker.com/repository/docker/patrickclery/amazon-asin)

# Amazon ASIN Lookup

![Screenshot](/app/assets/images/screenshot.jpg)

## Getting Started

## Requirements

* PostgreSQL *or* Docker (depending which method you choose)

### Method #1: Running Rails on your machine

1. Clone this repo to your local machine:

```shell script
git clone https://github.com/patrickclery/amazon-asin.git
```

2. From the command-line, cd into the directory: 

```shell script
cd amazon-asin
```

 If you are using `rvm_autoupdate_flag=1` in your `~/.rvmrc`, this will automatically install Ruby 2.6.5. Otherwise, run it manually:
 
```shell script
 rvm install
```

_Note: Using RVM is optional, just make sure you have Ruby 2.6.5 available._ 

3. Run the setup script. This does several things:
- Installs bundler (if necessary)
- Installs the required ruby gems
- Prepares your database
- Seeds your database

```shell script
bin/setup
```

### Method #2: Docker

1. Fire up Docker on your local machine
2. Run this command to build and deploy the app:

```shell script
docker-compose --env-file=config/docker/.env up
```

_Note: config/docker/.env is generated by `bin/setup` but you can create one using the sample config/docker/.env.sample_

3. Be sure that your Docker container publishes port 3000 (manually required).

### Finally...

Open the app in your browser by navigating to [http://localhost:3000/](http://localhost:3000/)

Enjoy :)

## Features

1. **Save the product title, category, rank, and dimensions** of *any* Amazon.ca product by entering the product's ASIN into the search and hitting submit.
2. **Error Message Handling.** If you enter an invalid ASIN, a non-existent product number, or the Product fails to save to the database, you'll see an error banner. Try it out using these ID:
- g1b3r1sh
- B012345678
3. **Single-Page App.** Like all good modern apps, everything is laid-out on one slick UI using Bootstrap CSS.
4. **GitHub Actions.**
    - Docker images published on every commit to master branch (@via [docker build-push-action](https://github.com/docker/build-push-action))
    - RSpec tests run on every push

## What is included?

#### These gems are added to the standard Rails stack

* Core
    * [better_errors](https://github.com/charliesome/better_errors) – useful error pages with interactive stack traces
    * [fast_jsonapi](https://github.com/Netflix/fast_jsonapi) – a JSON serializer that follows the standards of Google's JSON:API
    * [react-rails](https://github.com/reactjs/react-rails) – combines Rails + React + Webpacker. comes setup with a default App component at /
    * [rubocop](https://github.com/rubocop-hq/rubocop) – enforces Ruby code style
* Security
    * [brakeman](https://github.com/presidentbeef/brakeman) – detect security vulnerabilities
* Testing
    * [capybara](https://github.com/teamcapybara/capybara) – integration tests with screenshots
    * [codecov](https://github.com/codecov/codecov-ruby) – integration with [codecov.io](https://codecov.io/)
    * [faker](https://github.com/faker-ruby/faker) – generate fake data for tests
    * [shoulda](https://github.com/thoughtbot/shoulda) Common RSpec tests for Rails
    * [vcr](https://github.com/vcr/vcr) – save http requests for re-use with tests
    * [webmock](https://github.com/bblimke/webmock) – simulate live http requests

